东网云端接口文档

### 1.登录

```
 请求url :https://202.120.200.10:8443/siteOper/login

 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)
{
    "name": "",
    "pwd": ""
}

例：
{
	"name":"0123456789",
	"pwd":"123456789"
}

响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}
```



### 2.获取屏蔽库

```
 请求url :https://202.120.200.10:8443/siteOper/shieldLibraryInfo
 
 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)

	返回数据
	字段			数据格式	是否可空	字段说明
	err			int	否	结果错误状态，0=无错误，1=有错误
	errcode			int	否	错误代码，5位数字，参看配置文档
	data			array	否	返回数据,err=0时有效

	url		array	否	URL屏蔽报警列表
	id	string	否	ID,提交报警信息时传此ID
	name	string	否	屏蔽内容,URL或域名
	wtype	string	否	告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
	wid	string	否	告警等级，1=一般报警，2=中等程度报警，3=严重报警
	holdup	string	否	是否拦截，0=否，1=是

	ip		array	否	IP屏蔽报警列表
	id	string	否	ID,提交报警信息时传此ID
	name	string	否	屏蔽内容,IP地址
	wtype	string	否	告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
	wid	string	否	告警等级，1=一般报警，2=中等程度报警，3=严重报警
	holdup	string	否	是否拦截，0=否，1=是

	keyword		array	否	关键字屏蔽报警列表
	id	string	否	ID,提交报警信息时传此ID
	name	string	否	屏蔽内容,关键字
	wtype	string	否	告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
	wid	string	否	告警等级，1=一般报警，2=中等程度报警，3=严重报警
	holdup	string	否	是否拦截，0=否，1=是

	name		array	否	特殊人员屏蔽报警列表
	id	string	否	ID,提交报警信息时传此ID
	cardtype	string	否	证件类型，1=身份证，2=军官证
	cardno	string	否	身份证号码
	wtype	string	否	告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
	wid	string	否	告警等级，1=一般报警，2=中等程度报警，3=严重报警

	game		array	否	游戏屏蔽报警列表
	id	string	否	ID,提交报警信息时传此ID
	filename	string	否	游戏文件名
	process	string	否	进程名
	code	string	否	特征码
	wtype	string	否	告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
	wid	string	否	告警等级，1=一般报警，2=中等程度报警，3=严重报警


响应：

{
    "data": {
        "url": [
            {
                "id": "214",
                "name": "ty168.com",
                "wtype": "3",
                "wid": "3",
                "holdup": "0"
            },
            {
                "id": "216",
                "name": "h002.net",
                "wtype": "3",
                "wid": "3",
                "holdup": "0"
            }
        ],
        "ip": [
            {
                "id": "213",
                "name": "219.147.205.70",
                "wtype": "3",
                "wid": "3",
                "holdup": "0"
            },
            {
                "id": "215",
                "name": "219.154.21.144",
                "wtype": "3",
                "wid": "3",
                "holdup": "0"
            }
        ],
         "name": [
            {
                "id": "168",
                "cardtype": "1",
                "cardno": "123456789987654321",
                "wtype": "4",
                "wid": "1"
            },
            {
                "id": "168",
                "cardtype": "1",
                "cardno": "2132312323123213213",
                "wtype": "4",
                "wid": "2"
            }
        ],
        "game": [
            {
                "id": "215",
                "filename": "撕裂人2",
                "process": "3839.swf",
                "code": "uoCg1px/DnQGPkk31qj28Q==",
                "wtype": "1",
                "wid": "3"
            },
            {
                "id": "275",
                "filename": "波动少女",
                "process": "os2cne.exe",
                "code": "Cs52jmE6c3jtfSX7uj7Y3Q==",
                "wtype": "1",
                "wid": "3"
            }
         ],
         "keyword": [
            {
                "id": "222",
                "name": "图片",
                "wtype": "5",
                "wid": "3",
                "holdup": "1"
            },
            {
                "id": "223",
                "name": "wsss",
                "wtype": "5",
                "wid": "1",
                "holdup": "0"
            },
    },
    "err": "0",
    "errcode": "0",
    "desc": "",
    "t": "2018-04-09 09:27:30",
    "at": "0.0029451847076416"
}
```





### 3.场所服务器上传图片

```
 请求url : https://202.120.200.10:8443/siteOper/uploadImg
 
 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)

例：

body里的内容为img二进制文件内容。
a="upload" 
ip="192.168.88.106"
token="4fgrrt5343dfdf"

响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}
```

### 4.场所服务器与云服务器通道

定义一个ServerSocket监听在端口8282上

云向场所服务器发送指令

```json
 请求主机 : 202.120.200.10
 请求端口 : 8282

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)

例：
{"code":"0123456789"}eof

响应：
{"opt":"5","ip":"192.168.88.106"}

//opt string 不可以为空  操作类型，-1=数据传输格式不正确，断开连接，0=正常连接，不做任何操作，1=关机，2=重启，3=锁定，4=解锁，5=截屏 ;ip string 可以 机器内网IP，opt大于0时传输
/**
	 * 
	 * 客户端 字段 数据格式 是否可空 字段说明 
	 * opt string 是 操作类型，1=关机，2=重启，3=锁定，4=解锁，5=截屏 
	 * rst string 是 操作结果，0=失败，1=成功
	 * ip string 是 机器内网IP，以上三个参数在接受到控制指令且操作完成后传输结果给服务端 
	 * ping string 是心跳，传1即可(心跳每30秒发送一次) 
	 * code string 是 所属网吧CODE（此数据第一次连接（重连）时传输）
	 * 发送心跳包：'{"ping":"1"}\n' 第一次连接：'{"code":"1000010014"}\n'
	 */
```



### 5.获取场所服务端发送到云端的数据

```
 请求url : https://202.120.200.10:8443/siteOper/recordInformation?a=record
 record 上传记录的信息
 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)
 url			array	是	上网记录数组
	ip		string	否	机器IP
	t		string	否	访问开始时间
	info		string	否	具体URL地址
	prog			array	是	程序记录数组
	ip		string	否	机器IP
	t		string	否	访问开始时间
	info		string	否	具体程序名
	email			array	是	程序记录数组
	ip		string	否	机器IP
	t		string	否	访问开始时间
	from		string	否	发送邮箱地址
	to		string	否	接受地址或名字
	title		string	否	邮件标题
	qq			array	是	程序记录数组
	ip		string	否	机器IP
	t		string	否	访问开始时间
	info		string	否	qq号

例：
{
	"url": [{
		"ip": "192.168.88.106",
		"t": "0",
		"info": "upext.chrome.360.cn"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "info.pinyin.sogou.com"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "stat.sd.360.cn"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "config.pinyin.sogou.com"
	}],
	"prog": [{
		"ip": "192.168.88.106",
		"t": "0",
		"info": "SearchFilterHost.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "360se.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "SubIn.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "SoftupNotify.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "SGTool.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "WmiApSrv.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "WmiPrvSE.exe"
	}, {
		"ip": "192.168.88.106",
		"t": "0",
		"info": "SearchProtocolHost.exe"
	}]
}

响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}

请求url : https://202.120.200.10:8443/siteOper/recordInformation?a=openCard

开卡                   openCard        
退卡                   closeCard
上机                   operate
下机                   deplane

 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)
 

例：
{"no":"111111111","cardtype":"1","cardno":"3411111111111","name":"张三","ip":"192.168.88.106"}

				 	no			string	否	开卡卡号
					cardtype		string	否	证件类型，1=身份证
					cardno			string	否	证件号码
					name			string	否	姓名
					t			string	否	上机时间
					ip			string	否	机器IP
				 
{"no":"111111111","cardtype":"1","cardno":"3411111111111","name":"张三","ip":"192.168.88.106"}
响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}



 请求url :https://202.120.200.10:8443/siteOper/recordInformation?a=computerStatisics
 computerStatisics 上传计算机扫描结果
 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)
 

例：
{
	"total": "15",
	"list": [{
		"ip": "192.168.88.1",
		"install": "0",
		"mac": "CC-34-29-2D-89-00",
		"version": ""
	}, {
		"ip": "192.168.88.100",
		"install": "0",
		"mac": "00-24-81-C4-D0-2A",
		"version": ""
	}, {
		"ip": "192.168.88.101",
		"install": "0",
		"mac": "80-18-44-E0-AC-70",
		"version": ""
	}, {
		"ip": "192.168.88.102",
		"install": "0",
		"mac": "64-5A-04-CF-BB-90",
		"version": ""
	}, {
		"ip": "192.168.88.106",
		"install": "1",
		"mac": "64-5A-04-CF-D5-E4",
		"version": "2.2.1.8"
	}, {
		"ip": "192.168.88.107",
		"install": "0",
		"mac": "64-5A-04-CF-D9-88",
		"version": ""
	}, {
		"ip": "192.168.88.110",
		"install": "0",
		"mac": "50-01-D9-C1-70-37",
		"version": ""
	}, {
		"ip": "192.168.88.112",
		"install": "0",
		"mac": "64-5A-04-CF-65-6A",
		"version": ""
	}, {
		"ip": "192.168.88.113",
		"install": "0",
		"mac": "0C-8F-FF-94-82-76",
		"version": ""
	}, {
		"ip": "192.168.88.118",
		"install": "0",
		"mac": "34-17-EB-6B-F2-F2",
		"version": ""
	}, {
		"ip": "192.168.88.121",
		"install": "0",
		"mac": "5C-F3-FC-20-FA-6A",
		"version": ""
	}, {
		"ip": "192.168.88.122",
		"install": "0",
		"mac": "80-18-44-E0-C1-33",
		"version": ""
	}, {
		"ip": "192.168.88.123",
		"install": "0",
		"mac": "5C-F3-FC-1C-90-5E",
		"version": ""
	}, {
		"ip": "192.168.88.173",
		"install": "0",
		"mac": "34-17-EB-64-3B-E2",
		"version": ""
	}, {
		"ip": "192.168.88.175",
		"install": "0",
		"mac": "00-0C-29-AE-B7-51",
		"version": ""
	}]
}
响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}


请求url :https://202.120.200.10:8443/siteOper/recordInformation?a=addWarning
 addWarning 提交报警
 请求方式：post

 请求参数：
 ---- default -----(int 和 long 类型  默认值为0，String类型 默认为""。)
 ip  客户机地址
status   状态，0=未拦截，1=已拦截
wtype  告警类型，1=URL访问报警，2=游戏、程序报警，3=运行报警，4=特殊人员报警，5=关键字报警，6=紧急状况，7=未成年人告警，8=上网时长告警，9=擅停告警
wid    告警等级，1=一般报警，2=中等程度报警，3=严重报警
info   报警内容

例：
{"ip":"192.168.88.106","status":"1","wtype":"1","wid":"1","info":"1"}
响应：
{
    "data": {
        "token": "4fgrrt5343dfdf",
        "vkey": "56576767"
    },
    "err": 0,
    "errcode": 0,
    "desc": "uploadImg",
    "t": "",
    "at": ""
}
```

